/* All the targets */

targets = [
  {
    "Manufacturer": "Rinehart",
    "Type": "Bear",
    "Name": "Cinnamon Bear",
    "Image": "Bear-CinnamonBear.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Bear",
    "Name": "Large Black Bear",
    "Image": "Bear-LargeBlackBear.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Bear",
    "Name": "Mountain Grizzly",
    "Image": "Bear-MountainGrizzlyBear.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Bear",
    "Name": "Polar Bear",
    "Image": "Bear-PolarBear.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Big Game",
    "Name": "Moose",
    "Image": "BigGame-Moose.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Big Game",
    "Name": "Pronghorn Antelope",
    "Image": "BigGame-PronghornAntelope.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Boar",
    "Name": "Javelina",
    "Image": "Boar-Javelina.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Boar",
    "Name": "Razor Back",
    "Image": "Boar-RazorBack.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Boar",
    "Name": "Rising Boar",
    "Image": "Boar-RisingBoar.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "30 Point Buck",
    "Image": "Deer-30PointBuck.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Alert Deer",
    "Image": "Deer-AlertDeer.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Apple Browsing Buck",
    "Image": "Deer-AppleBrowsingBuck.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Bedded Doe",
    "Image": "Deer-BeddedDoe.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Big Ten Buck",
    "Image": "Deer-BigTenBuck.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Fallow Deer",
    "Image": "Deer-FallowDeer.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Feeding Deer",
    "Image": "Deer-FeedingDoe.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Fighting Rubbing Deer",
    "Image": "Deer-FightingRubbingBuck.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Giant Mule Deer",
    "Image": "Deer-GiantMuleDeer.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Deer",
    "Name": "Spike Buck",
    "Image": "Deer-SpikeBuck.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Exotic",
    "Name": "Baboon",
    "Image": "Exotic-Baboon.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Exotic",
    "Name": "Green Cobra",
    "Image": "Exotic-GreenCobra.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Exotic",
    "Name": "Green Frog",
    "Image": "Exotic-GreenFrog.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Exotic",
    "Name": "Hadrosaur",
    "Image": "Exotic-Hadrosaur.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Exotic",
    "Name": "Stegosaurus",
    "Image": "Exotic-Stegosaurus.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Exotic",
    "Name": "Velociraptor",
    "Image": "Exotic-Velociraptor.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Fish",
    "Name": "Carp",
    "Image": "Fish-Carp.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Predator",
    "Name": "Black Panther",
    "Image": "Predator-BlackPanther.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Predator",
    "Name": "Coyote",
    "Image": "Predator-Coyote.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Predator",
    "Name": "Snarling Wolf",
    "Image": "Predator-SnarlingWolf.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Predator",
    "Name": "Wolverine",
    "Image": "Predator-Wolverine.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Sheep",
    "Name": "Catalina Goat",
    "Image": "Sheep-CatalinaGoat.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Sheep",
    "Name": "Stone Sheep",
    "Image": "Sheep-StoneSheep.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Turkey",
    "Name": "Gobbler",
    "Image": "Turkey-Gobbler.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Turkey",
    "Name": "Strutting Turkey",
    "Image": "Turkey-StruttingTurkey.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Turkey",
    "Name": "Tom Turkey",
    "Image": "Turkey-TomTurkey.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Varmint",
    "Name": "Bobcat",
    "Image": "Varmint-Bobcat.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Varmint",
    "Name": "Raccoon",
    "Image": "Varmint-Raccoon.png"
  },
  {
    "Manufacturer": "Rinehart",
    "Type": "Varmint",
    "Name": "Skunk",
    "Image": "Varmint-Skunk.png"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Big Game",
    "Name": "African Impala",
    "Image": "african-impala.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Big Cat",
    "Name": "African Leopard",
    "Image": "african-leopard.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Big Cat",
    "Name": "African Lion",
    "Image": "african-lion.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Boar",
    "Name": "African Warthog",
    "Image": "african-warthog.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Bird",
    "Name": "Alert Jake",
    "Image": "alert-jake.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Turkey",
    "Name": "Alert Turkey",
    "Image": "alert-turkey.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Reptile",
    "Name": "Alligator",
    "Image": "alligator.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Antelope",
    "Image": "antelope_1.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Varmint",
    "Name": "Armadillo",
    "Image": "armadillo.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Vamint",
    "Name": "Beaver",
    "Image": "beaver.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Bedded Deer",
    "Image": "bedded-deer.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Sheep",
    "Name": "Bighorn Sheep",
    "Image": "bighorn-sheep_2.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Big Game",
    "Name": "Bison",
    "Image": "bison.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Black Bock",
    "Image": "black-bock.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Blesbock",
    "Image": "blesbock.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Varmint",
    "Name": "Bobcat",
    "Image": "bobcat.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Big Game",
    "Name": "Caribou",
    "Image": "caribou.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Chamois",
    "Image": "chamois.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Predator",
    "Name": "Coyote",
    "Image": "coyote.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Big Game",
    "Name": "Elk",
    "Image": "elk.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Predator",
    "Name": "Fox",
    "Image": "fox.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Galdiator Buck",
    "Image": "galdiator-buck.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Turkey",
    "Name": "Gobbling Turkey",
    "Image": "gobbling-turkey.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Bear",
    "Name": "Grizzly Bear",
    "Image": "grizzly-bear.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Predator",
    "Name": "Hyena",
    "Image": "hyena_1.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Ibex",
    "Image": "ibex.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Boar",
    "Name": "Javelina",
    "Image": "javelina.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Boar",
    "Name": "Javelina",
    "Image": "javelina_2.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Large Alert Deer",
    "Image": "large-alert-deer.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Large Deer",
    "Image": "large-deer.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Large Sneak Deer",
    "Image": "large-sneak-deer.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Bear",
    "Name": "Medium Black Bear",
    "Image": "medium-black-bear.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Bear",
    "Name": "Medium Brown Bear",
    "Image": "medium-brown-bear.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Medium Grazing Deer",
    "Image": "medium-grazing-deer.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Big Cat",
    "Name": "Mountain Lion",
    "Image": "mountain-lion.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Mule Deer",
    "Image": "mule-deer.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Varmint",
    "Name": "Porcupine",
    "Image": "porcupine.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Deer",
    "Name": "Pronghorn Antelope",
    "Image": "pronghorn-antelope.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Varmint",
    "Name": "Rabbit",
    "Image": "rabbit_2.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Varmint",
    "Name": "Raccoon",
    "Image": "raccoon.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Varmint",
    "Name": "Raccoon",
    "Image": "raccoon_2.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Predator",
    "Name": "Red Fox",
    "Image": "red-fox.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Bear",
    "Name": "Standing Bear",
    "Image": "standing-bear.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Predator",
    "Name": "Timber Wolf",
    "Image": "timber-wolf.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Turkey",
    "Name": "Turkey Strutting",
    "Image": "turkey-strutting.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Bear",
    "Name": "Walking Brown Bear",
    "Image": "walking-brown-bear.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Boar",
    "Name": "Wild Boar",
    "Image": "wild-boar.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Boar",
    "Name": "Wild Boar",
    "Image": "wild-boar_2.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Predator",
    "Name": "Wolf",
    "Image": "wolf.jpg"
  },
  {
    "Manufacturer": "DeltaMcKenzie",
    "Type": "Varmint",
    "Name": "Woodchuck",
    "Image": "woodchuck.jpg"
  }
];

/* Groups of Targets */
manufacturer = [];
type = [];
manufacturers = [];
types = [];

targets.forEach(function(t) {
	target = {
		url: 'targets/' + t.Manufacturer + '/' + t.Image,
		caption: t.Name,
		type: t.Type,
		manufacturer: t.Manufacturer
	};
	if (typeof manufacturer[t.Manufacturer] === 'undefined') {
		manufacturer[t.Manufacturer] = [];
	}
	manufacturer[t.Manufacturer].push(target);
	
	if (typeof type[t.Type] === 'undefined') {
		type[t.Type] = [];
	}
	type[t.Type].push(target);
	
	// add to manufacturer list
	existing_manu = manufacturers.find(function(e) {
		if (e.name == t.Manufacturer) {
			return true;
		} else {
			return false;
		}
	}); 
	if (! existing_manu) {
		manufacturers.push({"name": t.Manufacturer});
	}
	
	// add to types list
	existing_type = types.find(function(e) {
		if (e.name == t.Type) {
			return true;
		} else {
			return false;
		}
	}); 
	if (! existing_type) {
		types.push({"name": t.Type});
	}
});


var $$ = Dom7;

/*=== TEMPLATES ===*/
var manTemplate = $$('#man-template').html();
var compiledManTemplate = Template7.compile(manTemplate);

var html = compiledManTemplate({ manufacturers: manufacturers });
$$('#man-links').html(html);

var typeTemplate = $$('#type-template').html();
var compiledTypeTemplate = Template7.compile(typeTemplate);

var html = compiledTypeTemplate({ types: types });
$$('#type-links').html(html);


var app = new Framework7({
  // App root element
  root: '#app',
  // App Name
  name: 'My App',
  // App id
  id: 'com.myapp.test',
  // Enable swipe panel
  panel: {
    swipe: 'left',
  },
  // Add default routes
  routes: [
    {
      path: '/about/',
      url: 'about.html',
    },
  ],
  
  // ... other parameters
});

var mainView = app.views.create('.view-main');

/*=== Galleries ===*/
var pb = [];
targets.forEach(function(t) {
	//console.log('Creating: ' + t);
	pb[t.Manufacturer] = app.photoBrowser.create({
		photos: manufacturer[t.Manufacturer],
		type: 'popup'
	});
	pb[t.Type] = app.photoBrowser.create({
		photos: type[t.Type],
		type: 'popup'
	});
});


$$('.pb-popup-manufacturer').on('click', function (e) {
	//console.log(e.target.id);
	pb[e.target.id].open();
});

$$('.pb-popup-type').on('click', function (e) {
	//console.log(e.target.id);
	pb[e.target.id].open();
});


    
